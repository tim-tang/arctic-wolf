define("wolf-app/criteria-mgmt/0.0.1/index",["./criteria-app","$","underscore","backbone","app-common","app-core","./view/criteria-mgmt","./collection/criteria-coll","./model/criteria-model","./view/criteria-new-modal","modalEffects","./view/criteria-row","./router/criteria-router","subroute"],function(a,b,c){c.exports.CriteriaMgmtApp=a("./criteria-app")}),define("wolf-app/criteria-mgmt/0.0.1/criteria-app",["$","underscore","backbone","app-common","app-core","wolf-app/criteria-mgmt/0.0.1/view/criteria-mgmt","wolf-app/criteria-mgmt/0.0.1/collection/criteria-coll","wolf-app/criteria-mgmt/0.0.1/model/criteria-model","wolf-app/criteria-mgmt/0.0.1/view/criteria-new-modal","modalEffects","wolf-app/criteria-mgmt/0.0.1/view/criteria-row","wolf-app/criteria-mgmt/0.0.1/router/criteria-router","subroute"],function(a,b,c){a("$"),a("underscore");var d=a("backbone"),e=a("app-common"),f=e.CommonLoading,g=a("app-core").Eventbus,h=a("wolf-app/criteria-mgmt/0.0.1/view/criteria-mgmt"),i=a("wolf-app/criteria-mgmt/0.0.1/view/criteria-new-modal"),j=new d.Layout({manage:!0,prefix:"criteria-mgmt/src/tpl/",template:"criteria-container.html",events:{},initialize:function(){g.on("show-loading",this.show_loading,this),g.on("hide-loading",this.hide_loading,this)},afterRender:function(){var a=new h;this.insertView("#criteria-home",a).render();var b=new i;this.insertView("#criteria-home",b).render()},show_loading:function(){f.init("#main-content")},hide_loading:function(){f.destroy()}});c.exports={run:function(a){a.show("#main-content",j)},invokeCriteriaRouter:function(){var b=a("wolf-app/criteria-mgmt/0.0.1/router/criteria-router");return new b("criteria-mgmt/",{createTrailingSlashRoutes:!0})}}}),define("wolf-app/criteria-mgmt/0.0.1/view/criteria-mgmt",["$","underscore","app-common","app-core","wolf-app/criteria-mgmt/0.0.1/collection/criteria-coll","backbone","wolf-app/criteria-mgmt/0.0.1/model/criteria-model"],function(a,b,c){a("$"),a("underscore");var d=a("app-common"),e=d.BaseView,f=d.GenericMgmtViewMixin;d.CommonUtils,d.ComponentFacade;var g=a("app-core").EventBus,h=a("wolf-app/criteria-mgmt/0.0.1/collection/criteria-coll");a("wolf-app/criteria-mgmt/0.0.1/model/criteria-model");var i=e.extend({manage:!0,prefix:"criteria-mgmt/src/tpl/",template:"criteria-mgmt.html",datatable_id:"criteria-mgmt-datatable",collection:h,afterRender:function(){h.fetch()},new_obj:function(a){a&&a.preventDefault(),g.trigger("reset_criteria_new_modal")}});i.mixin(f),c.exports=i}),define("wolf-app/criteria-mgmt/0.0.1/collection/criteria-coll",["$","underscore","backbone","wolf-app/criteria-mgmt/0.0.1/model/criteria-model"],function(a,b,c){a("$");var d=a("underscore"),e=a("backbone"),f=a("wolf-app/criteria-mgmt/0.0.1/model/criteria-model"),g=e.Collection.extend({model:f,url:"/criterias",columns:[],data:[],parse:function(a){this.columns=a.aoColumns;for(var b=d.pluck(this.columns,"mData"),c=a.aaData,e=0;e<c.length;e++){var f=new this.model;d.each(b,function(a){f.set(a,c[e][a])}),this.push(f)}return this.models},selected:function(){return this.filter(function(a){return a.get("is_selected")===!0})}});c.exports=new g}),define("wolf-app/criteria-mgmt/0.0.1/model/criteria-model",["backbone"],function(a,b,c){var d=a("backbone"),e=d.Model.extend({urlRoot:"/criterias",defaults:{cri_name:"",cri_desc:"",obj_type:"",enabled:"",is_selected:!1},toggle_select:function(){this.set({is_selected:!this.get("is_selected")})}});c.exports=e}),define("wolf-app/criteria-mgmt/0.0.1/view/criteria-new-modal",["modalEffects","$","underscore","backbone","wolf-app/criteria-mgmt/0.0.1/collection/criteria-coll","wolf-app/criteria-mgmt/0.0.1/model/criteria-model","wolf-app/criteria-mgmt/0.0.1/view/criteria-row","app-core","app-common"],function(a,b,c){a("modalEffects");var d=a("$"),e=a("underscore"),f=a("backbone"),g=a("wolf-app/criteria-mgmt/0.0.1/collection/criteria-coll"),h=a("wolf-app/criteria-mgmt/0.0.1/model/criteria-model"),i=a("wolf-app/criteria-mgmt/0.0.1/view/criteria-row"),j=a("app-core").Eventbus,k=a("app-common").ComponentFacade,l=f.View.extend({manage:!0,model:new h,prefix:"criteria-mgmt/src/tpl/modal/",template:"criteria-new-modal.html",criteriaCount:1,events:{"click #criteria-create-action":"create_criteria","change #object-type":"changeObjectType"},initialize:function(){this.objectType={selector_id:"object-type",optgroups:[{options:[{value:"1",label:"User"},{value:"2",label:"UserGroup"},{value:"3",label:"Vehicle"}]}]},j.on("add_criteria_row",this.addCriteriaRow,this),j.on("remove_criteria_row",this.removeCriteriaRow,this),j.on("reset_criteria_new_modal",this.resetCriteriaNewModal,this)},afterRender:function(){k.init_switch(".switch"),k.init_select2(".select2",this.objectType);var a=this.objectType.optgroups[0].options[0].value,b=new i({objType:a});this.insertView("#criteria-row-container",b).render()},changeObjectType:function(){var a=d("#object-type-container").find("select").val();this.resetCriteria(a)},addCriteriaRow:function(){var a=d("#object-type-container").find("select").val(),b=new i({objType:a});this.insertView("#criteria-row-container",b).render(),this.criteriaCount++},removeCriteriaRow:function(a){this.criteriaCount>1&&(a.$el.remove(),this.criteriaCount--)},resetCriteriaNewModal:function(){var a=this.objectType.optgroups[0].options[0].value;this.resetObjectType(a),this.resetCriteria(a)},resetObjectType:function(){d("#object-type-container").children().remove(),k.init_select2(".select2",this.objectType)},resetCriteria:function(a){e.each(this.views["#criteria-row-container"],function(a){a.$el.remove()});var b=new i({objType:a});this.insertView("#criteria-row-container",b).render(),this.criteriaCount=1},new_attributes:function(){for(var a=3,b=this.$("#criteria-table").children("#criteria-row-container").find("select"),c=b.length/3,d=0;c>d;d++){var e=b[d*a+0].value,f=b[d*a+1].value,g=b[d*a+2].value;console.log(">>>>>>>>>>>>>>Criteria "+d+": attributes-"+e+" operator-"+f+" logicOperator-"+g)}return{cri_name:this.$("#cri-name").val().trim(),cri_desc:this.$("#cri-desc").val().trim(),obj_type:this.$("#object-type").val().trim(),enabled:"on"===this.$("#enabled").val().trim()?"Yes":"No"}},create_criteria:function(){g.create(this.new_attributes())}});c.exports=l}),define("wolf-app/criteria-mgmt/0.0.1/view/criteria-row",["modalEffects","$","underscore","backbone","wolf-app/criteria-mgmt/0.0.1/collection/criteria-coll","wolf-app/criteria-mgmt/0.0.1/model/criteria-model","app-core","app-common"],function(a,b,c){a("modalEffects"),a("$"),a("underscore");var d=a("backbone");a("wolf-app/criteria-mgmt/0.0.1/collection/criteria-coll");var e=a("wolf-app/criteria-mgmt/0.0.1/model/criteria-model"),f=a("app-core").Eventbus,g=a("app-common").ComponentFacade,h=d.View.extend({manage:!0,model:new e,prefix:"criteria-mgmt/src/tpl/modal/",template:"criteria-row.html",events:{"change select":"changeSelectValue","click #add":"addCriteria","click #remove":"removeCriteria"},initialize:function(){this.userAttrs={optgroups:[{options:[{value:"1",label:"User Name"},{value:"2",label:"User Description"},{value:"3",label:"Attribute01"}]}]},this.userGroupAttrs={optgroups:[{options:[{value:"1",label:"UG Name"},{value:"2",label:"UG Description"},{value:"3",label:"Attribute01"}]}]},this.vehicleAttrs={optgroups:[{options:[{value:"1",label:"Vehicle Name"},{value:"2",label:"Vehicle Description"},{value:"3",label:"Attribute01"}]}]},this.operators_0={optgroups:[{options:[{value:"1",label:"Start with"},{value:"2",label:"Contains"},{value:"3",label:"End with"}]}]},this.operators_1={optgroups:[{options:[{value:"1",label:"Equal to"},{value:"2",label:"Great than"},{value:"3",label:"Less than"}]}]},this.operators_2={optgroups:[{options:[{value:"1",label:"Start with(Date)"},{value:"2",label:"Contains(Date)"},{value:"3",label:"End with(Date)"}]}]},this.logicOperators={optgroups:[{options:[{value:"1",label:"AND"},{value:"2",label:"OR"}]}]},this.objType=this.options.objType},afterRender:function(){var a=null;"1"==this.objType?(g.init_select2(".select2",this.userAttrs,this,0),a=this.userAttrs.optgroups[0].options[0].value):"2"==this.objType?(g.init_select2(".select2",this.userGroupAttrs,this,0),a=this.userGroupAttrs.optgroups[0].options[0].value):"3"==this.objType&&(g.init_select2(".select2",this.vehicleAttrs,this,0),a=this.vehicleAttrs.optgroups[0].options[0].value),"1"==a?g.init_select2(".select2",this.operators_0,this,1):"2"==a?g.init_select2(".select2",this.operators_1,this,1):"3"==a&&g.init_select2(".select2",this.operators_2,this,1),g.init_select2(".select2",this.logicOperators,this,3)},changeSelectValue:function(a){var b=a.currentTarget.parentElement.parentElement.id;if("attributes-container"===b){this.$el.children("#operators-container").children().remove();var c=a.val;"1"==c?g.init_select2(".select2",this.operators_0,this,1):"2"==c?g.init_select2(".select2",this.operators_1,this,1):"3"==c&&g.init_select2(".select2",this.operators_2,this,1)}},addCriteria:function(a){a&&a.preventDefault(),f.trigger("add_criteria_row")},removeCriteria:function(a){a&&a.preventDefault(),f.trigger("remove_criteria_row",this)}});c.exports=h}),define("wolf-app/criteria-mgmt/0.0.1/router/criteria-router",["backbone","app-core","subroute"],function(a,b,c){var d=a("backbone"),e=a("app-core").Eventbus;a("subroute");var f=d.SubRoute.extend({initialize:function(){},routes:{"":"home"},home:function(){e.trigger("layout:switch-module-action")}});c.exports=f});
