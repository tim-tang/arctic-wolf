define("wolf-app/app-main/0.0.1/index",["./app-main","$","underscore","wolf-tpl","backbone","layoutmanager","app-security","./app-router","app-core","./app-base-router","app-dashboard","app-generic-filter","app-user-mgmt","app-user-group-mgmt","app-role-mgmt","app-privilege-mgmt","app-criteria-mgmt","app-vehicle-mgmt","app-layout","app-common"],function(a,b,c){c.exports.AppMain=a("./app-main")}),define("wolf-app/app-main/0.0.1/app-main",["$","underscore","wolf-tpl","backbone","layoutmanager","app-security","wolf-app/app-main/0.0.1/app-router","app-core","wolf-app/app-main/0.0.1/app-base-router","app-dashboard","app-generic-filter","app-user-mgmt","app-user-group-mgmt","app-role-mgmt","app-privilege-mgmt","app-criteria-mgmt","app-vehicle-mgmt","app-layout","app-common"],function(a,b,c){var d=a("$");window._=a("underscore"),a("wolf-tpl");var e=a("backbone");a("layoutmanager");var f=a("app-security").AuthenticationProvider,g=a("wolf-app/app-main/0.0.1/app-router");window.App=a("app-common").CommonConstants,e.Layout.configure({prefix:"wolf-app/",fetchTemplate:function(a){if(seajs.production){var b=window.JST||{};if(b[a])return b[a]}var c=this.async();d.get(a,function(a){c(_.template(a))},"text")}});var h=e.sync;e.sync=function(a,b,c){c=_.extend(c,{url:App.WS_HOST+(_.isFunction(b.url)?b.url():b.url)});var d=f.get("security-user");if(d)var e=_.extend({beforeSend:function(a){var b=d.auth_token;console.log("Authentication Token: >>",b),b&&a.setRequestHeader("Authorization",b)}},c);h(a,b,e?e:c)},c.exports={init:function(){var a={ROOT:"/wolf-app",APP_ROUTERS:[new g]};e.history.start({root:a.ROOT,pushState:!1,hashChange:!0})}}}),define("wolf-app/app-main/0.0.1/app-router",["$","underscore","backbone","app-security","app-core","wolf-app/app-main/0.0.1/app-base-router","app-dashboard","app-generic-filter","app-user-mgmt","app-user-group-mgmt","app-role-mgmt","app-privilege-mgmt","app-criteria-mgmt","app-vehicle-mgmt","app-layout"],function(a,b,c){var d=a("$"),e=a("underscore"),f=a("backbone");a("app-security").SecurityApp;var g=a("app-security").AuthenticationProvider,h=a("app-core"),i=h.Eventbus,j=h.ViewMgmt,k=a("wolf-app/app-main/0.0.1/app-base-router"),l={};l.Router=k.extend({initialize:function(){i.on("layout:switch-module-action",this.switch_module_action,this),i.on("layout:discard-layout-action",this.discard_layout_action,this),d("#main-body").on("click","a:not(a[data-bypass])",function(a){a.preventDefault();var b=d(this).attr("href"),c="#"+f.history.fragment;b===c?f.history.loadUrl(c):f.history.navigate(b,{trigger:!0,replace:!1})})},switch_module_action:function(){var a=this;this.predict_layout_existence(function(){a.switch_module()})},discard_layout_action:function(){l.layoutApp=null,j.discardLayout()},switch_module:function(){switch(i.trigger("layout:active-menu-item"),f.history.fragment){case"dashboard/":a("app-dashboard").DashboardApp.run(j);break;case"generic-filter/":a("app-generic-filter").GenericFilterApp.run(j);break;case"user-mgmt/":a("app-user-mgmt").UserMgmtApp.run(j);break;case"user-group-mgmt/":a("app-user-group-mgmt").UserGrpMgmtApp.run(j);break;case"role-mgmt/":a("app-role-mgmt").RoleMgmtApp.run(j);break;case"privilege-mgmt/":a("app-privilege-mgmt").PrivilegeMgmtApp.run(j);break;case"criteria-mgmt/":a("app-criteria-mgmt").CriteriaMgmtApp.run(j);break;case"vehicle-mgmt/":a("app-vehicle-mgmt").VehicleMgmtApp.run(j)}},routes:{"":"home","security/*subrouter":"invokeSecurityModule","dashboard/*subrouter":"invokeDashboardModule","vehicle-mgmt/*subrouter":"invokeVehicleModule","user-group-mgmt/*subrouter":"invokeUserGroupModule","user-mgmt/*subrouter":"invokeUserModule","role-mgmt/*subrouter":"invokeRoleModule","privilege-mgmt/*subrouter":"invokePrivilegeModule","criteria-mgmt/*subrouter":"invokeCriteriaModule","generic-filter/*subrouter":"invokeGenericFilterModule","*error":"not_found"},before:function(a,b){{var c=g.get("authenticated"),d=f.history.location.hash,h=e.contains(App.SECURITY_RESOURCES,d);e.contains(App.CANCELLED_WHILE_AUTH_DONE,d)}return!c&&h?(g.put("redirect-url",d),f.history.navigate("#security/login",{trigger:!0})):b()},after:function(){},home:function(){f.history.navigate("security/login",!0)},invokeSecurityModule:function(){l.securityRouter||(l.securityRouter=a("app-security").SecurityApp.invokeSecurityRouter())},invokeDashboardModule:function(){this.predict_layout_existence(function(){l.dashboardRouter||(l.dashboardRouter=a("app-dashboard").DashboardApp.invokeDashboardRouter())})},invokeVehicleModule:function(){this.predict_layout_existence(function(){l.vehicleRouter||(l.vehicleRouter=a("app-vehicle-mgmt").VehicleMgmtApp.invokeVehicleRouter())})},invokeUserGroupModule:function(){this.predict_layout_existence(function(){l.userGroupRouter||(l.userGroupRouter=a("app-user-group-mgmt").UserGrpMgmtApp.invokeUserGroupRouter())})},invokeUserModule:function(){this.predict_layout_existence(function(){l.userRouter||(l.userRouter=a("app-user-mgmt").UserMgmtApp.invokeUserRouter())})},invokeRoleModule:function(){this.predict_layout_existence(function(){l.roleRouter||(l.roleRouter=a("app-role-mgmt").RoleMgmtApp.invokeRoleRouter())})},invokePrivilegeModule:function(){this.predict_layout_existence(function(){l.privilegeRouter||(l.privilegeRouter=a("app-privilege-mgmt").PrivilegeMgmtApp.invokePrivilegeRouter())})},invokeCriteriaModule:function(){this.predict_layout_existence(function(){l.criteriaRouter||(l.criteriaRouter=a("app-criteria-mgmt").CriteriaMgmtApp.invokeCriteriaRouter())})},invokeGenericFilterModule:function(){this.predict_layout_existence(function(){l.genericFilterRouter||(l.genericFilterRouter=a("app-generic-filter").GenericFilterApp.invokeGenericFilterRouter())})},not_found:function(){i.trigger("render-404")},predict_layout_existence:function(b){return l.layoutApp?b():(l.layoutApp=a("app-layout").LayoutApp,l.layoutApp.retain=!0,j.showLayout("#layout-container",l.layoutApp,function(){b()}),void 0)}}),c.exports=l.Router}),define("wolf-app/app-main/0.0.1/app-base-router",["backbone","underscore"],function(a,b,c){var d=a("backbone"),e=a("underscore"),f=d.Router.extend({before:function(){},after:function(){},route:function(a,b,c){e.isRegExp(a)||(a=this._routeToRegExp(a)),e.isFunction(b)&&(c=b,b=""),c||(c=this[b]);var f=this;return d.history.route(a,function(e){var g=f._extractParameters(a,e),h=function(){c&&c.apply(f,g),f.trigger.apply(f,["route:"+b].concat(g)),f.trigger("route",b,g),d.history.trigger("route",f,b,g),f.after.apply(f,g)};f.before.apply(f,[g,h])}),this}});c.exports=f});
